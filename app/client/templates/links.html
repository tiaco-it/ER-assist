<template name="linksLayout">
    {{> _linksHeader}}
    {{#ionView}}
        {{>ltabs}}
        {{#if Template.subscriptionsReady}}
            {{#ionContent class="padding has-tabs-top"}}
                {{>linksDouble}}
            {{/ionContent}}
        {{else}}
            {{> spinner}}
        {{/if}}
        {{>mtabs}}
    {{/ionView}}
</template>

<template name="_linksHeader">
    {{#ionHeaderBar class="bar-positive"}}
        <h1 class="title">Lenker og nummer</h1>
    {{/ionHeaderBar}}
    {{#contentFor "headerButtonRight"}}
        {{> atNavButton}} <p>{{username}}</p>
    {{/contentFor}}
</template>

<template name='ltabs'>
    console.log('ltabs')
    <div class="tabs-striped tabs-top tabs-background-positive tabs-color-light">
        <div class="tabs">
            {{#if One}}
                <a class="tab-item active" id="one">
                    Lenker
                </a>
            {{else}}
                <a class="tab-item" id="one">
                    Lenker
                </a>
            {{/if}}
            {{#if Two}}
                <a class="tab-item active" id="two">
                    Nummer
                </a>
            {{else}}
                <a class="tab-item" id="two">
                    Nummer
                </a>
            {{/if}}
        </div>
    </div>
</template>

<template name='linksDouble'>
    {{#if One}}
        {{#ionList}}
            {{#each urls}}
                <a class="link item item-icon-left" href="#" onclick="window.open('{{link}}', '_system', 'location=yes'); return false;">
                    <i class="icon ion-link"></i>
                    <h2>{{title}}</h2>
                    <p>{{link}}</p>
                </a>
            {{/each}}
        {{/ionList}}
        {{#if currentUser}}
        <a href="{{pathFor 'add.url'}}" class="button pull-right" func="add">
            {{> ionIcon icon="plus"}}
        </a>
        {{/if}}
    {{/if}}

    {{#if Two}}
        {{#ionList}}
            {{#each numbers}}
                <a class="link item item-icon-left" href="tel:{{number}}" target="_blank">
                    <i class="icon ion-ios-telephone"></i>
                    <h2>{{title}}</h2>
                    <p>{{number}}</p>
                </a>
            {{/each}}
        {{/ionList}}
        {{#if currentUser}}
        <a href="{{pathFor 'add.number'}}" class="button pull-right" func="add">
            {{> ionIcon icon="plus"}}
        </a>
        {{/if}}
    {{/if}}
</template>
